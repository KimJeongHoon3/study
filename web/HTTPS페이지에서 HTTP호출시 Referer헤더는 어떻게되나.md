HTTPS페이지에서 HTTP호출시 Referer헤더는 어떻게되나

- 크롬 브라우저에서 HTTPS 페이지에서 HTTP 주소를 호출할 때, 기본적으로 Referrer-Policy가 설정되지 않은 경우, Referer 헤더는 다음과 같이 처리됩니다.
  - HTTPS에서 HTTPS로의 요청: 원본 페이지의 URL이 Referer 헤더에 포함됩니다.
  - HTTPS에서 HTTP로의 요청: Referer 헤더는 전송되지 않습니다. 
- 따라서, HTTPS 페이지에서 HTTP 주소를 호출하면 기본적으로 Referer 헤더는 사라집니다. 이렇게 처리되는 이유는 웹 보안을 강화하기 위해서입니다. HTTPS 페이지에서 HTTP 페이지로 이동할 때, Referer 헤더를 전송하면 HTTPS 페이지의 정보가 노출될 수 있기 때문입니다.
- 그러나 개발자는 페이지에 Referrer-Policy를 명시적으로 설정할 수 있습니다. 이 속성을 사용하여 Referer 헤더의 동작을 변경할 수 있습니다. 예를 들어, Referrer-Policy: unsafe-url로 설정하면 HTTPS에서 HTTP로의 요청에서도 Referer 헤더가 전송됩니다. 하지만 이 설정은 보안 취약점을 높일 수 있으므로 권장되지 않습니다.
- 결론적으로, HTTPS 페이지에서 HTTP 주소를 호출할 때 Referer 헤더가 사라질 수 있습니다. 이 동작은 보안을 강화하기 위한 것이며, 개발자가 명시적으로 Referrer-Policy를 설정하지 않는 한 기본 동작입니다.

- 무슨 보안 문제가 있는걸까?
  - HTTPS 페이지에서 HTTP 페이지로 이동할 때 Referer 헤더를 전송하지 않는 이유는 중요한 정보가 노출되는 것을 방지하기 위해서입니다. Referer 헤더가 보안 문제를 일으키는 이유는 다음과 같습니다.
    - 민감한 정보 노출: Referer 헤더는 사용자가 방문한 이전 페이지의 URL을 포함합니다. 이전 페이지의 URL에 민감한 정보가 포함되어 있다면(예: 검색어, 개인 식별 정보, 액세스 토큰 등), 이 정보가 Referer 헤더를 통해 전송되어, 목적지 서버나 중간에 위치한 프록시 서버 등에 노출될 수 있습니다.
    - HTTPS에서 HTTP로의 전환: HTTPS는 데이터를 암호화하여 전송함으로써 안전한 통신을 보장하지만, HTTP는 평문으로 데이터를 전송합니다. 이로 인해 중간자 공격(Man-in-the-Middle attack)에 취약해집니다. HTTPS 페이지에서 HTTP 페이지로 이동할 때, Referer 헤더가 전송되면 이전 페이지의 정보가 중간자 공격자에게 노출될 수 있습니다.
    - 사생활 침해: Referer 헤더는 사용자의 이전 웹 페이지 방문 기록을 포함하고 있습니다. 이를 통해 사용자의 사생활을 파악하는 데 악용될 수 있으며, 웹 사이트 운영자가 사용자의 행동을 추적하고 프로파일링하는 데 사용할 수 있습니다.
  - 위와 같은 이유로, 웹 브라우저는 기본적으로 HTTPS 페이지에서 HTTP 페이지로 이동할 때 Referer 헤더를 전송하지 않습니다. 이러한 보안 문제를 완화하기 위해 웹 개발자는 Referrer-Policy를 사용하여 Referer 헤더의 동작을 제어할 수 있습니다. 예를 들어, 웹 페이지에서 Referrer-Policy: no-referrer를 설정하면 브라우저는 어떠한 요청에서도 Referer 헤더를 전송하지 않습니다. 이렇게 하여 위에서 언급한 보안 문제를 줄일 수 있습니다.

- 출처: chatGTP 4.0