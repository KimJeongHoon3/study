effective_java_클래스와_인터페이스

- 아이템15_클래스와 멤버의 접근 권한을 최소화하라
  - 잘 설계된 컴포넌트는 모든 내부구현을 완벽히 숨긴다. 오직 API를 통해서만 다른 컴포넌트와 소통하고 서로의 내부동작엔 전혀 개의치 않는다
    - 이를 정보은닉 혹은 캡슐화라고 한다
  - 정보은닉의 장점
    - 시스템 개발 속도 높인다. 여러 컴포넌트 병렬로 개발가능
      - 상호간 영향이 없기때문! 있어도 API(인터페이스)만 호출하면되니깐
    - 시스템 관리 비용 낮출수있음. 각 컴포넌트에 대한 디버깅이 용이하고 다른 컴포넌트로의 교체하는 부담도 적기때문
    - 성능 최적화 도움됨. 완성된 시스템 프로파일링한 후 최적화할 컴포넌트 찾아서, 해당 컴포넌트만 최적화 할 수 있기때문
    - 소프트웨어 재사용성 높임. 독자적으로 동작할 수 있는 컴포넌트라면, 컴포넌트를 가지고 어느곳에서든지 쉽게 활용 가능
    - 큰 시스템을 제작하는 난이도 낮춤. 시스템 전체가 아직 완성 안되었어도 개별 컴포넌트의 동작을 검증가능
      - 테스트 용이
    - => 정보은닉이 잘 되어잇다는것은 컴포넌트들을 서로 독립시켜서 개발, 테스트, 최적화, 적용, 분석, 수정을 개별적으로 할 수 있다는 뜻이다
  - 자바는 정보은닉을 위해 그 요소가 **선언된 위치** + **접근제한자** 를 활용하여 접근 제어를 하게되는데, 그중 접근제한자를 제대로 활용하는게 중요!
    - 기본원칙
      - ***모든 클래스와 멤버위 접근성을 가능한 한 좁혀야한다***
        - 소프트웨어가 올바로 동작하는 한 항상 가장 낮은 접근 수준을 부여!
    - top level class(가장 바깥의 클래스), 인터페이스에 부여할 수 있는 접근 수준: public, package-private 
      - top level class(가장 바깥의 클래스) 또는 인터페이스에서는 패키지를 외부에서 쓸 이유가 없다면 package-private으로 선언하자
        - 그래야 클라이언트들에게 아무런 피해없이 자유롭게 내부 구현을 수정 가능하다
        - public으로 하면 API가 되므로 하위호환을 위해 계속 관리필요..
    - 멤버(필드, 메서드, 중첩클래스, 중첩 인터페이스)에 부여할 수 있는 접근 수준: private, package-private, protected, public
      - package-private은 아무것도 명시하지않았을때 적용되는수준인데, 인터페이스의 멤버같은 경우는 명시하지않아도 항상 public이다
      - 공개 api를 세심하게 설계후, 그 외의 모든 멤버는 private으로!
        - 권한을 계속해서 풀어주는(즉, public 쪽으로 넓혀지는) 일이 반복된다면, 컴포넌트를 더 분해해야하는지 고민할것
      - private과 package-private은 공개 API에 영향을 주지않는다
        - 그러나 Serializable을 구현한 클래스에서는 private 필드더라도, 공개 API와 같이 여겨질수 있는데, 이는 역직렬화를 사용하고있는 곳이 있다면 해당 클래스를 변경하면 안되기때문이다..
      - protected 또한 공개 API이므로 영원히 지원필요
        - 그렇기에 적을수록 좋다..
      - 상위클래스의 메서드를 재정의할때 그 접근수준을 상위클래스에서보다 좁게 설정불가
        - 리스코프 치환원칙때문
          - 상위클래스의 인스턴스는 하위 클래스의 인스턴스로 사용가능 (상위 클래스에서 정의한게 하위클래스에서 사용못하면안된다..) => 아이템10
      - 테스트를위해 private 멤버를 package-private까지 허용하는것은 괜춘
      - public 클래스의 인스턴스 필드는 public 으로 선언 NO
        - 불변식보장안됨
        - 스레드에 안전하지않음
        - 혹여 final에 불변객체다 할지라도, 이미 공개api가 되어버렸기때문에 public 필드를 없애는 리팩토링 불가
        - 예외  
          - 상수는 괜춘(대문자 알파벳, 단어사이에 _)
          - 반드시 기본 타입 값 이거나 불변객체여야함
      - 클래스에서 *public* static final 배열 필드를 두거나 이 *필드를 반환하는 접근자 메서드*를 제공해서는 안된다
        ```java
            // 좋지 않은 예
            public static final Thing[] VALUES = {...};

            // 좋은 예1
            private static final Thing[] PRIVATE_VALUES = {...};
            public static final List<Thing> VALUES = Collections.unmodifialbeList(Arrays.asList(PRIVATE_VALUES));

            // 좋은 예2
            private static final Thing[] PRIVATE_VALUES = {...};
            public static final Thing[] values() {
                return PRIVATE_VALUES.clone();
            } 
        ```
      - 자바 9에서는 모듈이라는 개념이 추가되면서 2가지 암묵적 접근 수준이 추가
        - 모듈은 자신이 가지고 있는 패키지를 외부에 공개(export)할 것인지를 정의할 수 있는데, export하지 않으면, protected나 public으로 선언했을지라도 모듈 외부에서는 접근 할 수 없다
        - 여기서 외부에 공개되지않은 protected, public 이 두가지가 암묵적 접근 수준